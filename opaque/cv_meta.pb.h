/* Automatically generated nanopb header */
/* Generated by nanopb-0.4.9 */

#ifndef PB_SER_OPAQUE_CV_META_PB_H_INCLUDED
#define PB_SER_OPAQUE_CV_META_PB_H_INCLUDED
#include <pb.h>
#include "jon_shared_data_camera_day.pb.h"
#include "jon_shared_data_camera_heat.pb.h"
#include "jon_shared_data_rotary.pb.h"

#if PB_PROTO_HEADER_VERSION != 40
#error Regenerate this file with the current version of nanopb generator.
#endif

/* Struct definitions */
/* Per-channel CUDA IPC metadata (frame timing + sharpness pyramid + sensor gain).
 Populated from /jon_cuda_ipc_day and /jon_cuda_ipc_heat shared memory. */
typedef struct _ser_CvChannelMeta {
    /* Frame timing (nanoseconds, must be non-negative) */
    uint64_t pts_ns;
    uint64_t capture_time_ns;
    uint32_t generation;
    /* Sharpness pyramid (85 floats total, all normalized 0.0-1.0)
 Global sharpness score */
    float sharpness_level0;
    /* Quadrants: TL, TR, BL, BR (exactly 4 elements) */
    pb_callback_t sharpness_level1;
    /* 4x4 grid (exactly 16 elements, row-major) */
    pb_callback_t sharpness_level2;
    /* 8x8 grid (exactly 64 elements, row-major) */
    pb_callback_t sharpness_level3;
    /* Timing metrics (nanoseconds) */
    uint64_t sharpness_compute_ns;
    uint64_t sharpness_total_ns;
    bool sharpness_valid;
    /* Sensor gain (day camera only; heat channel sets gain_valid=false) */
    int32_t sensor_gain;
    bool gain_valid;
} ser_CvChannelMeta;

/* Aggregated CV metadata payload - combines all SHM sources at 60fps.
 Injected by cv-gateway into JonGUIState.opaque_payloads.

 Sources:
 - /jon_shm_rotary (rotary turret state)
 - /jon_shm_cam_day (day camera settings)
 - /jon_shm_cam_heat (thermal camera settings)
 - /jon_cuda_ipc_day (day channel CUDA IPC metadata)
 - /jon_cuda_ipc_heat (heat channel CUDA IPC metadata)

 UUID: 019c3e33-d52d-7552-b36b-6fdcaa5d59b8 */
typedef struct _ser_CvMeta {
    /* Correlation timestamp (CLOCK_MONOTONIC, microseconds) */
    uint64_t capture_monotonic_us;
    /* Freshness bitmask indicating which sources updated since last publish
 Bits: 0=rotary, 1=cam_day, 2=cam_heat, 3=cuda_day, 4=cuda_heat
 Valid range: 0-31 (5 bits) */
    uint32_t updated_sources;
    /* Embedded state messages (full copies from SHMs)
 These are validated by their own proto definitions */
    bool has_camera_day;
    ser_JonGuiDataCameraDay camera_day;
    bool has_camera_heat;
    ser_JonGuiDataCameraHeat camera_heat;
    bool has_rotary;
    ser_JonGuiDataRotary rotary;
    /* CUDA IPC channel metadata */
    bool has_channel_day;
    ser_CvChannelMeta channel_day;
    bool has_channel_heat;
    ser_CvChannelMeta channel_heat;
} ser_CvMeta;


#ifdef __cplusplus
extern "C" {
#endif

/* Initializer values for message structs */
#define ser_CvChannelMeta_init_default           {0, 0, 0, 0, {{NULL}, NULL}, {{NULL}, NULL}, {{NULL}, NULL}, 0, 0, 0, 0, 0}
#define ser_CvMeta_init_default                  {0, 0, false, ser_JonGuiDataCameraDay_init_default, false, ser_JonGuiDataCameraHeat_init_default, false, ser_JonGuiDataRotary_init_default, false, ser_CvChannelMeta_init_default, false, ser_CvChannelMeta_init_default}
#define ser_CvChannelMeta_init_zero              {0, 0, 0, 0, {{NULL}, NULL}, {{NULL}, NULL}, {{NULL}, NULL}, 0, 0, 0, 0, 0}
#define ser_CvMeta_init_zero                     {0, 0, false, ser_JonGuiDataCameraDay_init_zero, false, ser_JonGuiDataCameraHeat_init_zero, false, ser_JonGuiDataRotary_init_zero, false, ser_CvChannelMeta_init_zero, false, ser_CvChannelMeta_init_zero}

/* Field tags (for use in manual encoding/decoding) */
#define ser_CvChannelMeta_pts_ns_tag             1
#define ser_CvChannelMeta_capture_time_ns_tag    2
#define ser_CvChannelMeta_generation_tag         3
#define ser_CvChannelMeta_sharpness_level0_tag   4
#define ser_CvChannelMeta_sharpness_level1_tag   5
#define ser_CvChannelMeta_sharpness_level2_tag   6
#define ser_CvChannelMeta_sharpness_level3_tag   7
#define ser_CvChannelMeta_sharpness_compute_ns_tag 8
#define ser_CvChannelMeta_sharpness_total_ns_tag 9
#define ser_CvChannelMeta_sharpness_valid_tag    10
#define ser_CvChannelMeta_sensor_gain_tag        11
#define ser_CvChannelMeta_gain_valid_tag         12
#define ser_CvMeta_capture_monotonic_us_tag      1
#define ser_CvMeta_updated_sources_tag           2
#define ser_CvMeta_camera_day_tag                3
#define ser_CvMeta_camera_heat_tag               4
#define ser_CvMeta_rotary_tag                    5
#define ser_CvMeta_channel_day_tag               6
#define ser_CvMeta_channel_heat_tag              7

/* Struct field encoding specification for nanopb */
#define ser_CvChannelMeta_FIELDLIST(X, a) \
X(a, STATIC,   SINGULAR, UINT64,   pts_ns,            1) \
X(a, STATIC,   SINGULAR, UINT64,   capture_time_ns,   2) \
X(a, STATIC,   SINGULAR, UINT32,   generation,        3) \
X(a, STATIC,   SINGULAR, FLOAT,    sharpness_level0,   4) \
X(a, CALLBACK, REPEATED, FLOAT,    sharpness_level1,   5) \
X(a, CALLBACK, REPEATED, FLOAT,    sharpness_level2,   6) \
X(a, CALLBACK, REPEATED, FLOAT,    sharpness_level3,   7) \
X(a, STATIC,   SINGULAR, UINT64,   sharpness_compute_ns,   8) \
X(a, STATIC,   SINGULAR, UINT64,   sharpness_total_ns,   9) \
X(a, STATIC,   SINGULAR, BOOL,     sharpness_valid,  10) \
X(a, STATIC,   SINGULAR, INT32,    sensor_gain,      11) \
X(a, STATIC,   SINGULAR, BOOL,     gain_valid,       12)
#define ser_CvChannelMeta_CALLBACK pb_default_field_callback
#define ser_CvChannelMeta_DEFAULT NULL

#define ser_CvMeta_FIELDLIST(X, a) \
X(a, STATIC,   SINGULAR, UINT64,   capture_monotonic_us,   1) \
X(a, STATIC,   SINGULAR, UINT32,   updated_sources,   2) \
X(a, STATIC,   OPTIONAL, MESSAGE,  camera_day,        3) \
X(a, STATIC,   OPTIONAL, MESSAGE,  camera_heat,       4) \
X(a, STATIC,   OPTIONAL, MESSAGE,  rotary,            5) \
X(a, STATIC,   OPTIONAL, MESSAGE,  channel_day,       6) \
X(a, STATIC,   OPTIONAL, MESSAGE,  channel_heat,      7)
#define ser_CvMeta_CALLBACK NULL
#define ser_CvMeta_DEFAULT NULL
#define ser_CvMeta_camera_day_MSGTYPE ser_JonGuiDataCameraDay
#define ser_CvMeta_camera_heat_MSGTYPE ser_JonGuiDataCameraHeat
#define ser_CvMeta_rotary_MSGTYPE ser_JonGuiDataRotary
#define ser_CvMeta_channel_day_MSGTYPE ser_CvChannelMeta
#define ser_CvMeta_channel_heat_MSGTYPE ser_CvChannelMeta

extern const pb_msgdesc_t ser_CvChannelMeta_msg;
extern const pb_msgdesc_t ser_CvMeta_msg;

/* Defines for backwards compatibility with code written before nanopb-0.4.0 */
#define ser_CvChannelMeta_fields &ser_CvChannelMeta_msg
#define ser_CvMeta_fields &ser_CvMeta_msg

/* Maximum encoded size of messages (where known) */
/* ser_CvChannelMeta_size depends on runtime parameters */
/* ser_CvMeta_size depends on runtime parameters */

#ifdef __cplusplus
} /* extern "C" */
#endif

#endif
